<template>
  <div id="left-nav">
    <button class="new" @click="newFile">新建</button>
    <a class="item diagrams" @click="toPage('diagrams')">
      <svg t="1649855878183" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8700" width="20" height="20"><path d="M459.704448 833.996598" p-id="8701" :fill="active === 'diagrams' ? '#555555' : '#888888'"></path><path d="M947.859367 456.556247 589.952908 156.258856c-21.905916-18.380626-49.721425-28.515451-78.323856-28.52466l-0.044002 0c-28.585035 0-56.395428 10.110265-78.305437 28.467355l-358.517373 300.340369c-12.852726 10.767228-14.544251 29.912263-3.777023 42.764989 6.007831 7.16519 14.616906 10.859325 23.288402 10.859325 6.875594 0 13.793144-2.322905 19.47761-7.082302l18.520819-15.519462 0 325.160661c0 21.898753 8.527211 42.488697 24.01188 57.973366 15.484669 15.482623 36.071543 24.010857 57.974389 24.010857l184.665837 0 0-0.019443c66.174142 0 60.780295-60.693314 60.780295-60.693314L459.704448 629.535927c0-4.14746 1.616824-8.048303 4.552689-10.983145 2.930749-2.934842 6.833639-4.547573 10.985192-4.547573l72.124667 0c4.15053 0 8.04728 1.612731 10.984169 4.547573 2.934842 2.934842 4.551666 6.836709 4.551666 10.983145l0 204.460672-0.010233 0c0 0-5.393847 60.693314 60.780295 60.693314l0 0.019443 184.678116 0c21.895683 0 42.484603-8.528234 57.969273-24.010857 15.488763-15.485693 24.015973-36.074613 24.015973-57.973366L890.336256 487.539912l18.501376 15.527648c12.844539 10.772344 31.993668 9.101285 42.770106-3.746324C962.379059 486.47772 960.702883 467.333708 947.859367 456.556247zM829.619406 812.724109c0 5.681396-2.210341 11.026124-6.226818 15.043624-4.0175 4.0175-9.357112 6.228865-15.040555 6.228865L623.614565 833.996598 623.614565 629.535927c0-20.364817-7.931646-39.513946-22.330588-53.91391-14.400988-14.402011-33.55114-22.334681-53.915957-22.334681l-72.124667 0c-20.369933 0-39.521109 7.93267-53.918004 22.334681-14.397918 14.398942-22.330588 33.54807-22.330588 53.91391l0 204.460672L214.257294 833.996598c-5.683443 0-11.023054-2.211365-15.040555-6.228865-4.022617-4.0175-6.232958-9.362228-6.232958-15.040555l0-376.024096 279.278681-233.966683c11.003612-9.216919 24.966625-14.292518 39.321564-14.292518l0.020466 0c14.359033 0.005117 28.328185 5.094018 39.326681 14.32117l278.688233 233.836723L829.619406 812.724109z" p-id="8702" :fill="active === 'diagrams' ? '#555555' : '#888888'"></path></svg>
      <span :class="{'active': active === 'diagrams'}">我的文件</span>
      </a>
    <a class="item history" @click="toPage('history')">
      <svg t="1649855852412" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7766" width="20" height="20"><path d="M512 832c-176.448 0-320-143.552-320-320S335.552 192 512 192s320 143.552 320 320-143.552 320-320 320m0-704C300.256 128 128 300.256 128 512s172.256 384 384 384 384-172.256 384-384S723.744 128 512 128" p-id="7767" :fill="active === 'history' ? '#555555' : '#888888'"></path><path d="M544 505.856V320a32 32 0 0 0-64 0v199.104c0 8.48 3.36 16.64 9.376 22.624l107.296 107.296a31.904 31.904 0 0 0 45.248 0 32 32 0 0 0 0-45.248L544 505.856z" p-id="7768" :fill="active === 'history' ? '#555555' : '#888888'"></path></svg>
      <span :class="{'active': active === 'history'}">最近修改</span>
      </a>
    <!-- <a class="item colla" @click="toPage('colla')">
      <svg t="1649855822151" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6771" width="20" height="20"><path d="M668.8 384c0-140.8-115.2-256-256-256s-256 115.2-256 256c0 92.8 51.2 172.8 124.8 217.6-105.6 44.8-192 137.6-217.6 256-3.2 16 6.4 35.2 22.4 38.4h6.4c16 0 28.8-9.6 32-25.6 32-134.4 153.6-233.6 288-233.6h3.2c140.8 0 252.8-115.2 252.8-252.8z m-448 0c0-105.6 86.4-192 192-192s192 86.4 192 192-86.4 192-192 192-192-86.4-192-192zM732.8 544c-19.2 0-32 16-28.8 35.2 0 16 16 28.8 32 28.8h3.2c105.6-6.4 188.8-96 188.8-201.6s-83.2-192-185.6-201.6c-19.2 0-32 12.8-35.2 28.8 0 19.2 12.8 32 28.8 35.2 70.4 6.4 128 67.2 128 137.6 0 73.6-57.6 134.4-131.2 137.6zM960 758.4c-9.6-41.6-41.6-92.8-80-118.4-16-9.6-35.2-3.2-44.8 9.6-9.6 16-3.2 35.2 9.6 44.8 22.4 12.8 44.8 51.2 51.2 76.8 3.2 16 16 25.6 32 25.6h6.4c19.2-3.2 28.8-19.2 25.6-38.4zM620.8 640l-19.2-12.8c-16-9.6-35.2-6.4-44.8 9.6s-6.4 35.2 9.6 44.8l19.2 12.8c57.6 41.6 102.4 105.6 118.4 176 3.2 16 16 25.6 32 25.6h6.4c16-3.2 28.8-22.4 22.4-38.4-22.4-89.6-73.6-166.4-144-217.6z" :fill="active === 'colla' ? '#555555' : '#888888'" p-id="6772"></path></svg>
      <span :class="{'active': active === 'colla'}">与我协作</span>
    </a> -->
    <a class="item trash" @click="toPage('trash')">
      <svg t="1649855792891" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5892" width="20" height="20"><path d="M736 352.032L736.096 800h-0.128L288 799.968 288.032 352 736 352.032zM384 224h256v64h-256V224z m448 64h-128V202.624C704 182.048 687.232 160 640.16 160h-256.32C336.768 160 320 182.048 320 202.624V288H192a32 32 0 1 0 0 64h32V799.968C224 835.296 252.704 864 288.032 864h447.936A64.064 64.064 0 0 0 800 799.968V352h32a32 32 0 1 0 0-64z" p-id="5893" :fill="active === 'trash' ? '#555555' : '#888888'"></path><path d="M608 690.56a32 32 0 0 0 32-32V448a32 32 0 1 0-64 0v210.56a32 32 0 0 0 32 32M416 690.56a32 32 0 0 0 32-32V448a32 32 0 1 0-64 0v210.56a32 32 0 0 0 32 32" p-id="5894" :fill="active === 'trash' ? '#555555' : '#888888'"></path></svg>
      <span :class="{'active': active === 'trash'}">回收站</span>
    </a>
  </div>
</template>

<script>
import { addGraph } from '../api/index'
export default {
  name: 'leftNav',
  data () {
    return {
      active: 'diagrams',
    }
  },
  watch: {
  '$route' (to) {
    console.log(to);
      this.active = to.name
    }
  },
  created () {
    this.active = this.$route.name
  },
  methods: {
    toPage (name) {
      if (this.active !== name) {
        this.$router.push(name)
      }
    },
    newFile () {
      addGraph().then(res => {
        if (res.status === 200) {
          const graph = res.data.graph
          this.$router.push('diagraming/' + graph.id)
        }
      })
    }
  }
}
</script>

<style scoped lang="less">
#left-nav {
  width: 200px;
  flex-shrink: 0;
  margin-top: 30px;
  .new {
    display: flex;
    justify-content: center;
    margin: 0 auto;
    width: 120px;
    line-height: 30px;
    text-align: center;
    background-color: #4386f5;
    color: #FFF;
    border-radius: 4px;
    cursor: pointer;
    caret-color: transparent;
    transform: translateX(4px);
  }
  .item {
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    &:last-child {
      margin-right: 14px;
    }
    span {
      margin-left: 8px;
      font-size: 14px;
      line-height: 44px;
      color: #888;
      font-weight: 700;
      caret-color: transparent;
      &.active {
        color: #555;
      }
    }
  }
}
</style>